# Very bad py script to check exploit update

import requests
import time

webhookurl = "https://discord.com/api/webhooks/919210296835473418/5ZIzjjDHOKA8-d9kZW_mZSWKpufAO055tDeGb7fBWXRLxJ1yeaDILvpgSeaP8akPIYHr" # Webhook URL HERE

synapse = "https://synapse.to/whitelist/version"
scriptware = "https://script-ware.com/api/version/core"
krnl = "https://cdn.krnl.ca/version.txt"
test = "https://raw.githubusercontent.com/joeengo/exploit-update-checker-py/main/api/core/exploit/version.txt"

synapse_ver = "placeholder"
scriptware_ver = "placeholder"
krnl_ver = "placeholder"
test_ver = "placeholder"


def getVersion(url):
    response = requests.get(url)
    if response.status_code == 200:
        return response.text
    else:
        return ""


def formatIntoMessage(exploit, version):
    role = ""
    if exploit == "synapse x":
        role = "<@&919223855455826020>"
    elif exploit == "scriptware":
        role = "<@&919223896375451709>"
    elif exploit == "krnl":
        role = "<@&919224042798587934>"

    message = exploit + " has updated to version **" + version + "**, happy exploiting!"
    data = {
        "content": role,
    }
    data["embeds"] = [{"description": message, "title": exploit + " has updated!"}]
    result = requests.post(webhookurl, json=data)


while True:
    # Synapse X Version Check
    if getVersion(synapse) != synapse_ver:
        synapse_ver = getVersion(synapse)
        formatIntoMessage("synapse x", synapse_ver)
    # Scriptware Version Check
    if getVersion(scriptware) != scriptware_ver:
        scriptware_ver = getVersion(scriptware)
        print("scriptware updated to " + scriptware_ver)
        formatIntoMessage("scriptware", scriptware_ver)
    # Krnl Version Check
    if getVersion(krnl) != krnl_ver:
        krnl_ver = getVersion(krnl)
        formatIntoMessage("krnl", krnl_ver)
    # Testing version check
    if getVersion(test) != test_ver:
        test_ver = getVersion(test)
        formatIntoMessage("test", test_ver)

    time.sleep(30)
